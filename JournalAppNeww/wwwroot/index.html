<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>JournalAppNeww</title>
    <base href="/" />
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="JournalAppNeww.styles.css" />
    <link rel="icon" href="data:,">
    <!-- Quill.js CSS -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <script>
        function applyTheme(theme, primaryColor, backgroundColor, sidebarColor, textColor) {
            const root = document.documentElement;

            if (theme === 'custom') {
                root.setAttribute('data-theme', 'custom');
                root.style.setProperty('--primary-color', primaryColor);
                root.style.setProperty('--background-color', backgroundColor);
                root.style.setProperty('--sidebar-color', sidebarColor);
                root.style.setProperty('--text-color', textColor);
                // Assume custom theme uses dark sidebar logic for now or derive it
                root.style.setProperty('--card-background', backgroundColor); 
                root.style.setProperty('--icon-filter', 'none');
                
                // Reset standard variables overridden by data-theme if needed, 
                // but since we set data-theme='custom', the CSS selector [data-theme='dark'] won't apply.
            } else {
                // Clear inline styles that might interfere
                root.style.removeProperty('--primary-color');
                root.style.removeProperty('--background-color');
                root.style.removeProperty('--sidebar-color');
                root.style.removeProperty('--text-color');
                root.style.removeProperty('--card-background');
                root.style.removeProperty('--icon-filter');
                
                // Set the theme attribute
                root.setAttribute('data-theme', theme);
            }
        }
    </script>
</head>

<body>

    <div class="status-bar-safe-area"></div>

    <div id="app">Loading...</div>

    <div id="blazor-error-ui" data-nosnippet>
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>

    <script src="_framework/blazor.webview.js" autostart="false"></script>
    <!-- Quill.js JavaScript -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script>
        var quill;

        function initQuill() {
            quill = new Quill('#quill-editor', {
                theme: 'snow',
                modules: {
                    toolbar: [
                        [{ 'header': [1, 2, 3, false] }],
                        ['bold', 'italic', 'underline', 'strike'],
                        [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                        ['link'],
                        ['clean']
                    ]
                }
            });
        }

        function getQuillContent() {
            return quill.root.innerHTML;
        }

        function getQuillText() {
            return quill.getText();
        }

        function setQuillContent(html) {
            if (quill) {
                quill.root.innerHTML = html || '';
            }
        }
    </script>

</body>

</html>